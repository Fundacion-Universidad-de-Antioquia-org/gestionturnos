{% extends 'base.html' %}
{% load static %}

{% block styles %}
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-image: url('https://cdnfuadesarrollo.blob.core.windows.net/gestionturnos/fondoHomeTres.png');
       background-size: auto;               /* âœ… mantiene el tamaÃ±o original */
      background-repeat: no-repeat;        /* âœ… no repite la imagen */
      background-position: center center; 
      background-color: #ffffff; /* color verde muy suave de fondo */
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .overlay {
  margin-top: 80px;
  position: relative;
  z-index: 1;
  background: rgba(230, 255, 235, 0.35); /* verde claro translÃºcido */
  padding: 40px;
  border-radius: 16px;
  text-align: center;
  color: #1D5031;
  animation: aparecerBanner 1.2s ease-out forwards;
  transform: translateY(80px); /* ðŸ‘ˆ mÃ¡s bajo (ajusta el valor a gusto) */
  opacity: 0;
  backdrop-filter: blur(4px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}


    @keyframes aparecerBanner {
      0% {
        transform: translateY(30px);
        opacity: 0;
      }
      100% {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .overlay h1 {
      font-size: 3rem;
      margin-bottom: 20px;
      text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.6);
    }

    .overlay p {
      font-size: 1.3rem;
      line-height: 1.6;
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);
    }

    @media (max-width: 768px) {
      body {
        background-size: 140%;
      }
      .overlay h1 {
        font-size: 2rem;
      }
      .overlay p {
        font-size: 1rem;
      }
    }
  </style>

<!--Estilos del loader-->
<style>
  /* Fondo bloqueante */
#loader-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  pointer-events: all;
}

/* Ocultar por defecto */
#loader-overlay.hidden {
  display: none;
}

/* Contenedor del loader */
.loader-container {
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Loader circular */
.loader {
  border: 8px solid #f3f3f3;
  border-top: 8px solid #1d5031; /* verde institucional */
  border-radius: 50%;
  width: 80px;
  height: 80px;
  animation: spin 1s linear infinite;
}

/* AnimaciÃ³n */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Texto debajo del loader */
.loader-title {
  margin-top: 20px;
  font-size: 1.5rem;
  color: white;
  text-align: center;
  font-weight: bold;
}

</style>
{% endblock %}

{% block content %}
  <div class="overlay">
    <h1>Bienvenido al Sistema de GestiÃ³n de Turnos</h1>
    <p>Accede a todas las funcionalidades de forma rÃ¡pida y eficiente.</p>
  </div>

  <!-- Loader -->
<!-- Loader -->
<div id="loader-overlay" class="hidden">
  <div class="loader-container">
    <div class="loader"></div>
    <h2 class="loader-title">Sincronizando empleados...</h2>
  </div>
</div>

   <!-- === Barra superior fija === -->
    <section class="usuario-bar-section">
    <div class="usuario-bar d-flex align-items-center justify-content-between px-3">

    <!-- SecciÃ³n Izquierda: Foto + Usuario -->
    <div class="usuario-bar-logo-nombre">
        <span class="material-symbols-outlined mb-1" style="color: white; font-size: 46px;">account_circle</span>
      <div class="d-flex flex-column align-items-center flex-shrink-0">
      
        <!-- Nombre del usuario -->
        <div class="saludo" style="color: white; font-weight: 500;">
          {{ usuarioLogeado }}
        </div>

        <!-- TÃ­tulo de la pÃ¡gina -->
        <div class="saludo" style="color: #5a9138; font-size: 11px;">Â¡Bienvenido!</div>
      </div>
      </div>

    </div>
    </section>


{% endblock %}

{% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded",function(){
  
  showLoader();
  setTimeout(mostrarDatosProcesados, 5000);

    
  function showLoader() {
    document.getElementById("loader-overlay").classList.remove("hidden");
  }

   function hideLoader() {
      document.getElementById("loader-overlay").classList.add("hidden");
      }

    function mostrarDatosProcesados(){
      const procesados = "{{ success }}"
      const recibidos = "{{ recibidos }}"
      const validos = "{{ validos }}"
      const sinCedula = "{{ sin_cedula }}"
      const creados = "{{ creados }}"
      const actualizados = "{{ actualizados }}"
      const tiempo = "{{ tiempo_s }}"

      if(procesados){
        hideLoader()
         Swal.fire({
                    icon: "success",
                    title: "Se realizo correctamente la sincronizaciÃ“n con la base de datos",
                    text: "Nuevos empleados: "+creados+", empleados actualizados: "+actualizados ,
                      })
      }
  }    


  
  })
</script>

{% endblock %}
